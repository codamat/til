# E-R図（Entity-Relationship Diagram）

データベース設計で用いられる。
データの関係性を**エンティティ（実体）とリレーションシップ（関連）で表す**。

## 1. E-R図の主要な特徴

E-R図は主に「エンティティ」「アトリビュート」「リレーションシップ」「カーディナリティ」の4つで構成。 

1. **エンティティ（実体 / Entity）**
    - **意味**: 管理対象となる「モノ」や「概念」。名詞で表す。
    - **記号**: 長方形（四角）。
    - **例**: 「顧客」「商品」「注文」。
2. **アトリビュート（属性 / Attribute）**
    - **意味**: エンティティが持つ「特徴」や「性質」。
    - **記号**: エンティティの長方形の中に書く。
    - **例**: 「顧客」エンティティ内の「顧客ID」「氏名」「住所」。
3. **リレーションシップ（関連 / Relationship）**
    - **意味**: エンティティ同士の「繋がり」。動詞で表す。
    - **記号**: エンティティ間を結ぶ直線。
    - **例**: 顧客 「が」 注文する。
4. **カーディナリティ（多重度 / Cardinality）**
    - **意味**: リレーションシップの「数」の対応関係（1対1、1対多、多対多）。
    - **記号**: 線の端に付く特殊な記号（鳥の足など）。 

---

## 2. 特徴の覚え方

① 基本は「名詞」と「動詞」

- 箱（エンティティ）＝「人・モノ・概念（**名詞**）」
- 線（リレーション）＝「行動・関係（**動詞**）」

② 鳥の足（IE記法）をイメージ

一般的な「IE記法」のカーディナリティ（数）は、足の数で覚える。 

- **「1」のほう**: 縦棒（`|`）
- **「多」のほう**: 鳥の足（`《`）
- **「0」の可能性**: 丸（`O`） 

**【よくあるカーディナリティの組み合わせ】**

- **1対1**: `|--|` （例：社員と社員証）
- **1対多**: `|--<<` （例：部署と所属社員）
- **多対多**: `>>--<<` （例：学生と講義）
    - ※物理設計では「多対多」は中間に「注文明細」のような橋渡し用エンティティを挟んで「1対多」に分解するのが基本。 

③ 必須か・任意かで「丸」を使う

- **必須**: 棒が直接ささる（`|`）
- **任意（0でも良い）**: 丸がつく（`O`）
- 例：`O--<<` （0または多）

---

## 3. E-R図のメリット

- **視覚的理解**: 複雑なデータ構造が直感的にわかる。
- **設計ミス削減**: 漏れや矛盾に気づきやすい。
- **テーブル変換が容易**: エンティティ＝テーブル、アトリビュート＝列としてそのまま物理DB設計に落とし込める。 

---

## まとめ

- **E-R図＝「箱」と「線（鳥の足）」**
- **箱の中はデータ（名詞）、線で繋いで関係（動詞）**
- **1は棒（`|`）、多は鳥の足（`<<`）、0は丸（`O`）**

